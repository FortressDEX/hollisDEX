{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Eth = void 0;\n\nconst constants_1 = require(\"../eth/constants\");\n\nconst methods_1 = require(\"../communication/methods\");\n\nconst inputFormatters = {\n  defaultBlockParam: function () {\n    let arg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'latest';\n    return arg;\n  },\n  returnFullTxObjectParam: function () {\n    let arg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return arg;\n  },\n  blockNumberToHex: arg => Number.isInteger(arg) ? `0x${arg.toString(16)}` : arg\n};\n\nclass Eth {\n  constructor(communicator) {\n    this.communicator = communicator;\n    this.call = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_call,\n      formatters: [null, inputFormatters.defaultBlockParam]\n    });\n    this.getBalance = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getBalance,\n      formatters: [null, inputFormatters.defaultBlockParam]\n    });\n    this.getCode = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getCode,\n      formatters: [null, inputFormatters.defaultBlockParam]\n    });\n    this.getStorageAt = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getStorageAt,\n      formatters: [null, inputFormatters.blockNumberToHex, inputFormatters.defaultBlockParam]\n    });\n    this.getPastLogs = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getLogs\n    });\n    this.getBlockByHash = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getBlockByHash,\n      formatters: [null, inputFormatters.returnFullTxObjectParam]\n    });\n    this.getBlockByNumber = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getBlockByNumber,\n      formatters: [inputFormatters.blockNumberToHex, inputFormatters.returnFullTxObjectParam]\n    });\n    this.getTransactionByHash = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getTransactionByHash\n    });\n    this.getTransactionReceipt = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getTransactionReceipt\n    });\n    this.getTransactionCount = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_getTransactionCount,\n      formatters: [null, inputFormatters.defaultBlockParam]\n    });\n    this.getGasPrice = this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_gasPrice\n    });\n\n    this.getEstimateGas = transaction => this.buildRequest({\n      call: constants_1.RPC_CALLS.eth_estimateGas\n    })([transaction]);\n  }\n\n  buildRequest(args) {\n    const {\n      call,\n      formatters\n    } = args;\n    return async params => {\n      if (formatters && Array.isArray(params)) {\n        formatters.forEach((formatter, i) => {\n          if (formatter) {\n            params[i] = formatter(params[i]);\n          }\n        });\n      }\n\n      const payload = {\n        call,\n        params: params || []\n      };\n      const response = await this.communicator.send(methods_1.Methods.rpcCall, payload);\n      return response.data;\n    };\n  }\n\n}\n\nexports.Eth = Eth;","map":{"version":3,"sources":["../../../src/eth/index.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Eth = void 0;\nconst constants_1 = require(\"../eth/constants\");\nconst methods_1 = require(\"../communication/methods\");\nconst inputFormatters = {\n    defaultBlockParam: (arg = 'latest') => arg,\n    returnFullTxObjectParam: (arg = false) => arg,\n    blockNumberToHex: (arg) => Number.isInteger(arg) ? `0x${arg.toString(16)}` : arg,\n};\nclass Eth {\n    constructor(communicator) {\n        this.communicator = communicator;\n        this.call = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_call,\n            formatters: [null, inputFormatters.defaultBlockParam],\n        });\n        this.getBalance = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getBalance,\n            formatters: [null, inputFormatters.defaultBlockParam],\n        });\n        this.getCode = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getCode,\n            formatters: [null, inputFormatters.defaultBlockParam],\n        });\n        this.getStorageAt = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getStorageAt,\n            formatters: [null, inputFormatters.blockNumberToHex, inputFormatters.defaultBlockParam],\n        });\n        this.getPastLogs = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getLogs,\n        });\n        this.getBlockByHash = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getBlockByHash,\n            formatters: [null, inputFormatters.returnFullTxObjectParam],\n        });\n        this.getBlockByNumber = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getBlockByNumber,\n            formatters: [inputFormatters.blockNumberToHex, inputFormatters.returnFullTxObjectParam],\n        });\n        this.getTransactionByHash = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getTransactionByHash,\n        });\n        this.getTransactionReceipt = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getTransactionReceipt,\n        });\n        this.getTransactionCount = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_getTransactionCount,\n            formatters: [null, inputFormatters.defaultBlockParam],\n        });\n        this.getGasPrice = this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_gasPrice,\n        });\n        this.getEstimateGas = (transaction) => this.buildRequest({\n            call: constants_1.RPC_CALLS.eth_estimateGas,\n        })([transaction]);\n    }\n    buildRequest(args) {\n        const { call, formatters } = args;\n        return async (params) => {\n            if (formatters && Array.isArray(params)) {\n                formatters.forEach((formatter, i) => {\n                    if (formatter) {\n                        params[i] = formatter(params[i]);\n                    }\n                });\n            }\n            const payload = {\n                call,\n                params: params || [],\n            };\n            const response = await this.communicator.send(methods_1.Methods.rpcCall, payload);\n            return response.data;\n        };\n    }\n}\nexports.Eth = Eth;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}